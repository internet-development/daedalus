# Talos Daemon Configuration
# This file configures the Talos daemon for agent orchestration.

# Agent runner configuration
agent:
  # Backend to use: claude, opencode, or codex
  backend: claude
  claude:
    model: claude-opus-4-5
    # dangerously_skip_permissions: true
  # opencode:
  #   model: anthropic/claude-opus-4-5
  # codex:
  #   model: codex-mini-latest

# Scheduler configuration
scheduler:
  # Maximum concurrent agents (default: 1)
  max_parallel: 1
  # Auto-enqueue todo beans on daemon startup (default: false)
  auto_enqueue_on_startup: true

# Watcher configuration
watcher:
  # Directory containing beans (default: .beans)
  beansDir: .beans

# Output configuration
output:
  # Directory for persisted agent output logs
  dir: .talos/output/
  # Automatically mark beans as completed when agent succeeds and no unchecked items
  autoComplete: false

# Planning agent configuration
planning_agent:
  # Provider options:
  # - claude: Direct Anthropic API (requires ANTHROPIC_API_KEY env var)
  # - anthropic: Same as claude
  # - openai: OpenAI API (requires OPENAI_API_KEY env var)
  # - claude_code: Claude CLI subscription (no API key needed, uses `claude` CLI)
  # - opencode: OpenCode CLI (no API key needed, uses `opencode` CLI)
  provider: claude_code
  # Model for API-based providers (not used with claude_code/opencode)
  model: claude-opus-4-5
  # Temperature for response generation
  temperature: 0.7

# Logging configuration
logging:
  # Log level: trace, debug, info, warn, error (default: info)
  level: info
  # Pretty print for development (default: false)
  prettyPrint: true
  # Fields to redact from logs (default: password, apiKey, token)
  redact:
    - password
    - apiKey
    - token
    - secret
  # Destination: stdout or file path (default: stdout)
  destination: stdout

# Planning configuration
planning:
  # Directory containing skill files (relative to project root)
  skills_directory: ./skills

  # Planning modes
  modes:
    # Brainstorm mode for creative exploration
    brainstorm:
      enabled: true
      skill: beans-brainstorming
      # Bean types that require brainstorming before work
      enforce_for_types:
        - feature
        - epic
        - milestone

    # Breakdown mode for task decomposition
    breakdown:
      enabled: true
      skill: beans-breakdown
      # Ideal task duration range (in minutes)
      min_task_duration_minutes: 1
      max_task_duration_minutes: 5
      # Suggest test beans alongside implementation tasks
      suggest_test_beans: true
